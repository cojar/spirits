<!doctype html>
<html lang="ko" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" th:href="@{/product_form.css}">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <title>제품 등록 페이지</title>
</head>
<body>
<div class="wrap">
    <div class="title-box">
        <div class="title">상품등록</div>
    </div>
    <form th:object="${productForm}" method="post" th:action="@{/product/create}">
        <div th:replace="~{form_errors :: formErrorsFragment}"></div>
        <div class="Category">
            <label for="category">대분류:</label>
            <select id="category" onchange="filterByCategory()">
                <option value="">대분류 선택</option>
                <option th:each="mainCategory : ${mainCategoryList}" th:value="${mainCategory.id}"
                        th:text="${mainCategory.mainCategory}"></option>
            </select>
            <input type="hidden" th:field="*{mainCategoryId}" name="mainCategoryId" id="mainCategoryId">
        </div>

        <div class="SubCategory">
            <label for="subCategory">중분류:</label>
            <select id="subCategory" onchange="filterBySubCategory()">
                <option value="">중분류 선택</option>
                <option th:each="subCategory : ${subCategoryList}" th:value="${subCategory.id}"
                        th:text="${subCategory.subCategory}"></option>
            </select>
            <input type="hidden" th:field="*{subCategoryId}" name="subCategoryId" id="subCategoryId">
        </div>

        <div class="product-name">
            <div class="title">이름:</div>
            <input type="text" th:field="*{name}" name="name" id="name" placeholder="이름을 입력해주세요">
        </div>

        <div class="Costrange-box">
            <label for="Costrange">가격:</label>
            <select id="Costrange" onchange="filterByCostrange()">
                <option value="가격">가격 선택</option>
                <option th:each="costRange : ${costRangeList}" th:value="${costRange.id}"
                        th:text="${costRange.costRange}"></option>
            </select>
            <input type="hidden" th:field="*{costRangeId}" name="costRangeId" id="costRangeId">
            <input type="number" th:field="*{cost}" name="cost" id="cost" placeholder="가격을 입력해주세요">
        </div>

        <div class="ABVrange-box">
            <label for="ABVrange">도수:</label>
            <select id="ABVrange" onchange="filterByABVrange()">
                <option value="도수">도수 선택</option>
                <option th:each="abvRange : ${abVrangeList}" th:value="${abvRange.id}"
                        th:text="${abvRange.abvRange}"></option>
            </select>
            <input type="hidden" th:field="*{abvRangeId}" name="abvRangeId" id="abvRangeId">
            <input type="number" step="0.01" th:field="*{abv}" name="abv" id="abv" placeholder="도수를 입력해주세요">
        </div>

        <div class="net-weight-box">
            <label for="net-weight">용량:</label>
            <select id="net-weight" onchange="filterByNetWeight()">
                <option value="">용량 선택</option>
                <option th:each="netWeight : ${netWeightList}" th:value="${netWeight.id}"
                        th:text="${netWeight.netWeight}">
            </select>
            <input type="hidden" id="netWeightId" name="netWeightId">
        </div>

        <div class="taste-box">
            <div class="title">맛:</div>
            <input type="text" th:field="*{flavor}" name="flavor" id="flavor" placeholder="맛을 입력해주세요">
        </div>

        <div class="incense-box">
            <div class="title">향:</div>
            <input type="text" th:field="*{aroma}" name="aroma" id="aroma" placeholder="향을 입력해주세요">
        </div>

        <div class="incense-box">
            <div class="title">인포:</div>
            <input type="text" th:field="*{info}" name="info" id="info" placeholder="제품설명을 입력해주세요">
        </div>

        <div class="paring-box">
            <label for="paring1">안주:</label>
            <select id="paring1" onchange="filterByParing(1)">
                <option value="안주1">안주1 선택</option>
                <option th:each="pairing : ${pairingList}" th:value="${pairing.id}" th:text="${pairing.pairing}">
            </select>
            <input type="hidden" id="paringId1" name="paringId1">
            <select id="paring2" onchange="filterByParing(2)">
                <option value="안주2">안주2 선택</option>
                <option th:each="pairing : ${pairingList}" th:value="${pairing.id}" th:text="${pairing.pairing}">
            </select>
            <input type="hidden" id="paringId2" name="paringId2">
            <select id="paring3" onchange="filterByParing(3)">
                <option value="안주3">안주3 선택</option>
                <option th:each="pairing : ${pairingList}" th:value="${pairing.id}" th:text="${pairing.pairing}">
            </select>
            <input type="hidden" id="paringId3" name="paringId3">
        </div>

        <div class="Cask-box">
            <label for="Cask-box">캐스크:</label>
            <select id="cask1" onchange="filterByCask(1)">
                <option value="오크통1">오크통1 선택</option>
                <option th:each="cask : ${caskList}" th:value="${cask.id}" th:text="${cask.cask}">
            </select>
            <input type="hidden" id="caskId1" name="caskId1">
            <select id="cask2" onchange="filterByCask(2)">
                <option value="오크통2">오크통2 선택</option>
                <option th:each="cask : ${caskList}" th:value="${cask.id}" th:text="${cask.cask}">
            </select>
            <input type="hidden" id="caskId2" name="caskId2">
            <select id="cask3" onchange="filterByCask(3)">
                <option value="오크통3">오크통3 선택</option>
                <option th:each="cask : ${caskList}" th:value="${cask.id}" th:text="${cask.cask}">
            </select>
            <input type="hidden" id="caskId3" name="caskId3">
            <select id="cask4" onchange="filterByCask(4)">
                <option value="오크통4">오크통4 선택</option>
                <option th:each="cask : ${caskList}" th:value="${cask.id}" th:text="${cask.cask}">
            </select>
            <input type="hidden" id="caskId4" name="caskId4">
        </div>

        <div class="nation">
            <label for="nation">국가:</label>
            <select id="nation" onchange="filterByNation()">
                <option value="국가">국가 선택</option>
                <option th:each="nation : ${nationList}" th:value="${nation.id}" th:text="${nation.nation}">
            </select>
            <input type="hidden" id="nationId" name="nationId">
        </div>

        <div class="product-img-box">
            <label for="avatar1">상품사진:</label>
            <input type="file" id="avatar1" name="avatar1" accept="image/png, image/jpeg">
        </div>

        <div class="product-detail-img-box">
            <label for="avatar2">상품상세사진:</label>
            <input type="file" id="avatar2" name="avatar2" accept="image/png, image/jpeg">
        </div>

        <div class="product-info-img-box">
            <label for="avatar3">상품정보사진:</label>
            <input type="file" id="avatar3" name="avatar3" accept="image/png, image/jpeg">
        </div>
    </form>

    <div class="btn-section">
        <div class="btn-box">
            <button type="submit" class="btn btn-primary"><a href="">저장하기</a></button>
            <button class="btn-cancle"><a href="">취소하기</a></button>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        $("#category").on("change", function() {
            filterByCategory();
        });

        $("#subCategory").on("change", function() {
            filterBySubCategory();
        });

        $("#Costrange").on("change", function() {
            filterByCostrange();
        });

        $("#ABVrange").on("change", function() {
            filterByABVrange();
        });

        $("#net-weight").on("change", function() {
            filterByNetWeight();
        });

        $("#paring1").on("change", function() {
            filterByParing(1);
        });

        $("#paring2").on("change", function() {
            filterByParing(2);
        });

        $("#paring3").on("change", function() {
            filterByParing(3);
        });

        $("#cask1").on("change", function() {
            filterByCask(1);
        });

        $("#cask2").on("change", function() {
            filterByCask(2);
        });

        $("#cask3").on("change", function() {
            filterByCask(3);
        });

        $("#cask4").on("change", function() {
            filterByCask(4);
        });

        $("#nation").on("change", function() {
            filterByNation();
        });
    });


    var selectedMainCategory = $("#category").val();
    var selectedSubCategory = $("#subCategory").val();
        var selectedCostRange = $("#Costrange").val();
        var selectedABVrange = $("#ABVrange").val();
        var selectedNetWeight = $("#net-weight").val();
        var selectedParing1 = $("#paring1").val();
        var selectedParing2 = $("#paring2").val();
        var selectedParing3 = $("#paring3").val();
        var selectedCask1 = $("#cask1").val();
        var selectedCask2 = $("#cask2").val();
        var selectedCask3 = $("#cask3").val();
        var selectedCask4 = $("#cask4").val();
        var selectedNation = $("#nation").val();





    function filterByCategory() { // 함수 각각 따로 정의해야됨
<!--        var selectedMainCategory = $("#category").val();-->
<!--        var selectedCostRange = $("#Costrange").val();-->
<!--        var selectedABVrange = $("#ABVrange").val();-->
<!--        var selectedNetWeight = $("#net-weight").val();-->
<!--        var selectedParing1 = $("#paring1").val();-->
<!--        var selectedParing2 = $("#paring2").val();-->
<!--        var selectedParing3 = $("#paring3").val();-->
<!--        var selectedCask1 = $("#cask1").val();-->
<!--        var selectedCask2 = $("#cask2").val();-->
<!--        var selectedCask3 = $("#cask3").val();-->
<!--        var selectedCask4 = $("#cask4").val();-->
<!--        var selectedNation = $("#nation").val();-->

        // Ajax 요청 전송
        $.ajax({
            url: "/product/create",
            type: "GET",
            data: {
                category: selectedMainCategory,
                subCategory: selectedSubCategory,
                Costrange: selectedCostRange,
                ABVrange: selectedABVrange,
                "net-weight": selectedNetWeight,
                paring1: selectedParing1,
                paring2: selectedParing2,
                paring3: selectedParing3,
                cask1: selectedCask1,
                cask2: selectedCask2,
                cask3: selectedCask3,
                cask4: selectedCask4,
                nation: selectedNation
            },
            success: function(response) {
                console.log("Selected Category: " + selectedMainCategory);
                console.log("Selected subCategory: " + selectedSubCategory);
                console.log("Selected Costrange: " + selectedCostRange);
                console.log("Selected ABVrange: " + selectedABVrange);
                console.log("Selected net-weight: " + selectedNetWeight);
                console.log("Selected paring1: " + selectedParing1);
                console.log("Selected paring2: " + selectedParing2);
                console.log("Selected paring3: " + selectedParing3);
                console.log("Selected cask1: " + selectedCask1);
                console.log("Selected cask2: " + selectedCask2);
                console.log("Selected cask3: " + selectedCask3);
                console.log("Selected cask4: " + selectedCask4);
                console.log("Selected nation: " + selectedNation);

                console.log("Server Response: " + response);
            },
            error: function(xhr, status, error) {
                console.log("Error: " + error);
            }
        });
    }
    function filterBySubCategory() { // 함수 각각 따로 선언해야됨
        var selectedSubCategory = $("#subCategory").val();

        // Ajax 요청 전송
        $.ajax({
            url: "/product/create",
            type: "GET",
            data: {
                category: selectedMainCategory,
                subCategory: selectedSubCategory,
                Costrange: selectedCostRange,
                ABVrange: selectedABVrange,
                "net-weight": selectedNetWeight,
                paring1: selectedParing1,
                paring2: selectedParing2,
                paring3: selectedParing3,
                cask1: selectedCask1,
                cask2: selectedCask2,
                cask3: selectedCask3,
                cask4: selectedCask4,
                nation: selectedNation
            },
            success: function(response) {
                console.log("Selected Category: " + selectedMainCategory);
                console.log("Selected subCategory: " + selectedSubCategory);
                console.log("Selected Costrange: " + selectedCostRange);
                console.log("Selected ABVrange: " + selectedABVrange);
                console.log("Selected net-weight: " + selectedNetWeight);
                console.log("Selected paring1: " + selectedParing1);
                console.log("Selected paring2: " + selectedParing2);
                console.log("Selected paring3: " + selectedParing3);
                console.log("Selected cask1: " + selectedCask1);
                console.log("Selected cask2: " + selectedCask2);
                console.log("Selected cask3: " + selectedCask3);
                console.log("Selected cask4: " + selectedCask4);
                console.log("Selected nation: " + selectedNation);

                console.log("Server Response: " + response);
            },
            error: function(xhr, status, error) {
                console.log("Error: " + error);
            }
        });
    }
</script>
<!--<script th:inline="javascript">-->
<!--    function filterByCategory() {-->
<!--        var selectedCategory = $("#category").val();-->
<!--        $("#mainCategoryId").val(selectedCategory);-->
<!--        $("#subCategory").val("");-->
<!--        $("#subCategoryId").val("");-->
<!--    }-->

<!--    function filterBySubCategory() {-->
<!--        var selectedSubCategory = $("#subCategory").val();-->
<!--        $("#subCategoryId").val(selectedSubCategory);-->
<!--    }-->

<!--    function filterByCostrange() {-->
<!--        var selectedCostrange = $("#Costrange").val();-->
<!--        $("#costRangeId").val(selectedCostrange);-->
<!--    }-->

<!--    function filterByABVrange() {-->
<!--        var selectedABVrange = $("#ABVrange").val();-->
<!--        $("#abvRangeId").val(selectedABVrange);-->
<!--    }-->
<!--    function filterByNetWeight() {-->
<!--        var netWeightSelect = document.getElementById("net-weight");-->
<!--        var netWeightIdInput = document.getElementById("netWeightId");-->
<!--        netWeightIdInput.value = netWeightSelect.value;-->
<!--    }-->
<!--    function filterByParing(selectNumber) {-->
<!--        var paringSelect = document.getElementById("paring" + selectNumber);-->
<!--        var paringIdInput = document.getElementById("paringId" + selectNumber);-->
<!--        paringIdInput.value = paringSelect.value;-->
<!--    }-->

<!--    function filterByCask(selectNumber) {-->
<!--        var caskSelect = document.getElementById("cask" + selectNumber);-->
<!--        var caskIdInput = document.getElementById("caskId" + selectNumber);-->
<!--        caskIdInput.value = caskSelect.value;-->
<!--    }-->

<!--    function filterByNation() {-->
<!--        var nationSelect = document.getElementById("nation");-->
<!--        var nationIdInput = document.getElementById("nationId");-->
<!--        nationIdInput.value = nationSelect.value;-->
<!--    }-->
<!--    function submitProductForm() {-->
<!--        var productForm = {-->
<!--            name: $("#name").val(),-->
<!--            cost: $("#cost").val(),-->
<!--            abv: $("#abv").val(),-->
<!--            aroma: $("#aroma").val(),-->
<!--            flavor: $("#flavor").val(),-->
<!--            info: $("#info").val(),-->
<!--            mainCategoryId: $("#category").val(),-->
<!--            subCategoryId: $("#subCategory").val(),-->
<!--            costRangeId: $("#Costrange").val(),-->
<!--            abvRangeId: $("#ABVrange").val(),-->
<!--            netWeightId: $("#net-weight").val(),-->
<!--            pairings: getSelectedValues("#paring"),-->
<!--            nationId: $("#nation").val(),-->
<!--            casks: getSelectedValues("#Cask-box")-->
<!--        };-->

<!--        $.ajax({-->
<!--            url: "/product/create",-->
<!--            type: "POST",-->
<!--            data: JSON.stringify(productForm),-->
<!--            contentType: "application/json; charset=utf-8",-->
<!--            dataType: "json",-->
<!--            success: function(response) {-->
<!--                console.log("Product saved successfully");-->
<!--                console.log(response);-->
<!--            },-->
<!--            error: function(error) {-->
<!--                console.log("Error saving product");-->
<!--                console.log(error);-->
<!--            }-->
<!--        });-->
<!--    }-->

<!--    function getSelectedValues(selectId) {-->
<!--        var selectedValues = [];-->
<!--        $(selectId + " option:selected").each(function() {-->
<!--            selectedValues.push($(this).val());-->
<!--        });-->
<!--        return selectedValues;-->
<!--    }-->

<!--</script>-->
<!--<script>-->
<!--$(document).ready(function() {-->
<!--  // 저장하기 버튼 클릭 시 이벤트 핸들러-->
<!--  $(".btn-primary").click(function(event) {-->
<!--    event.preventDefault(); // 기본 동작 중지-->

<!--    // productForm 데이터 수집-->
<!--    var productForm = {-->
<!--  name: $("#name").val(),-->
<!--  cost: $("#cost").val(),-->
<!--  abv: $("#abv").val(),-->
<!--  aroma: $("#aroma").val(),-->
<!--  flavor: $("#flavor").val(),-->
<!--  info: $("#info").val(),-->
<!--  mainCategoryId: $("#category").val(),-->
<!--  subCategoryId: $("#subCategory").val(),-->
<!--  costRangeId: $("#Costrange").val(),-->
<!--  abvRangeId: $("#ABVrange").val(),-->
<!--  netWeightId: $("#net-weight").val(),-->
<!--  pairings: getSelectedValues("#paring"),-->
<!--  nationId: $("#nation").val(),-->
<!--  casks: getSelectedValues("#Cask-box")-->
<!--};-->

<!--function getSelectedValues(selectId) {-->
<!--  var selectedValues = [];-->
<!--  $(selectId + " option:selected").each(function() {-->
<!--    selectedValues.push($(this).val());-->
<!--  });-->
<!--  return selectedValues;-->
<!--}-->

<!--    // 서버로 데이터 전송-->
<!--    $.ajax({-->
<!--      type: "POST",-->
<!--      url: "/product/create", // 등록 API의 URL로 수정 필요-->
<!--      contentType: "application/json",-->
<!--      data: JSON.stringify(productForm),-->
<!--      success: function(response) {-->
<!--        console.log(response); // 서버 응답 출력-->
<!--        // 적절한 처리 (예: 리다이렉트, 메시지 표시 등)-->
<!--      },-->
<!--      error: function(xhr, status, error) {-->
<!--        console.log("Error:", error); // 에러 메시지 출력-->
<!--        // 적절한 에러 처리-->
<!--      }-->
<!--    });-->
<!--  });-->
<!--});-->

<!--</script>-->
</body>
</html>